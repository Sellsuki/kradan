(function(e){function t(t){for(var r,i,o=t[0],u=t[1],c=t[2],l=0,p=[];l<o.length;l++)i=o[l],a[i]&&p.push(a[i][0]),a[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);h&&h(t);while(p.length)p.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,i=1;i<n.length;i++){var o=n[i];0!==a[o]&&(r=!1)}r&&(s.splice(t--,1),e=u(u.s=n[0]))}return e}var r={},i={3:0},a={3:0},s=[];function o(e){return u.p+"js/"+({}[e]||e)+"."+{1:"93837626",2:"2e4d60a2"}[e]+".js"}function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={2:1};i[e]?t.push(i[e]):0!==i[e]&&n[e]&&t.push(i[e]=new Promise(function(t,n){for(var r="css/"+({}[e]||e)+"."+{1:"31d6cfe0",2:"01b2b997"}[e]+".css",i=u.p+r,a=document.getElementsByTagName("link"),s=0;s<a.length;s++){var o=a[s],c=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(c===r||c===i))return t()}var l=document.getElementsByTagName("style");for(s=0;s<l.length;s++){o=l[s],c=o.getAttribute("data-href");if(c===r||c===i)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||i,a=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");a.request=r,n(a)},p.href=i;var h=document.getElementsByTagName("head")[0];h.appendChild(p)}).then(function(){i[e]=0}));var r=a[e];if(0!==r)if(r)t.push(r[2]);else{var s=new Promise(function(t,n){r=a[e]=[t,n]});t.push(r[2]=s);var c,l=document.getElementsByTagName("head")[0],p=document.createElement("script");p.charset="utf-8",p.timeout=120,u.nc&&p.setAttribute("nonce",u.nc),p.src=o(e),c=function(t){p.onerror=p.onload=null,clearTimeout(h);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src,s=new Error("Loading chunk "+e+" failed.\n("+r+": "+i+")");s.type=r,s.request=i,n[1](s)}a[e]=void 0}};var h=setTimeout(function(){c({type:"timeout",target:p})},12e4);p.onerror=p.onload=c,l.appendChild(p)}return Promise.all(t)},u.m=e,u.c=r,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(n,r,function(t){return e[t]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/",u.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var p=0;p<c.length;p++)t(c[p]);var h=l;s.push([8,0]),n()})({5:function(e,t){},6:function(e,t){},7:function(e,t){},8:function(e,t,n){e.exports=n("Vtdi")},Vtdi:function(e,t,n){"use strict";n.r(t);n("pIFo"),n("VRzm");var r=n("Kw5r"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app",on:{mousemove:e.mousemove,mouseup:e.mouseUp}},[n("div",{staticClass:"left",style:{width:e.divLeft+"px"}},[n("div",{staticClass:"tree"},[n("ul",[n("item",{staticClass:"item",attrs:{model:e.list,currentOpenFilePath:e.currentOpenFilePath,"unseen-file-paths":e.unseenFilePaths,"unseen-folder-paths":e.unseenFolderPaths},on:{openFile:e.openFile}})],1)]),n("div",{staticClass:"download-button",attrs:{download:""},on:{click:e.downloadZip}},[n("i",{staticClass:"fas fa-download"}),e._v("Â \n      "+e._s(e.list.name)+".zip\n    ")])]),n("div",{staticClass:"resize",on:{mousedown:e.mouseDown}}),n("div",{staticClass:"right",style:{width:e.divRight+"px"}},[n("ul",{staticClass:"tabs"},e._l(e.openFiles,function(t){return n("li",{key:t.path,staticClass:"tabs-tab",class:{"is-active":e.currentOpenFilePath===t.path},on:{click:function(n){if(n.target!==n.currentTarget)return null;e.openFile(t.path)}}},[n("span",{staticClass:"tabs-tab-name",on:{click:function(n){if(n.target!==n.currentTarget)return null;e.openFile(t.path)}}},[e._v(e._s(t.name))]),n("span",{staticClass:"icon",staticStyle:{float:"right"},on:{click:function(n){e.closeFile(t.path)}}},[n("i",{directives:[{name:"show",rawName:"v-show",value:!e.isUnseenTab(t.path),expression:"!isUnseenTab(file.path)"}],staticClass:"fas fa-times"}),n("i",{directives:[{name:"show",rawName:"v-show",value:e.isUnseenTab(t.path),expression:"isUnseenTab(file.path)"}],staticClass:"fas fa-edit"})])])})),n("div",{staticClass:"item-views"},e._l(e.openFiles,function(t){return n("div",{key:t.path},[e.currentOpenFilePath===t.path?n("viewer",{attrs:{info:t,"unseen-line":e.unseenLine}}):e._e()],1)}))])])},a=[],s=(n("rE2o"),n("ioFf"),n("OG14"),n("rGqo"),n("INYr"),n("a94B")),o=(n("KKXr"),n("ls82"),n("MECJ")),u=(n("dRSK"),n("f3/d"),n("fDnD")),c=n.n(u),l=n("JEAp"),p=n.n(l),h=n("gFX4"),f=n.n(h),d=function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"Bvte"))},m=function(){return n.e(1).then(n.bind(null,"Xn2k"))},v=n("v2jn"),g=new c.a;function b(){var e=document.createElement("div");return e.style.color="#fba949",e.innerHTML="|",e}var w,F={name:"App",data:function(){return{list:{name:"Root",path:"/",children:[]},currentOpenFilePath:"",openFiles:[],unseenFilePaths:[],unseenFolderPaths:[],unseenLine:[],mousePress:!1,divLeft:200}},computed:{divRight:function(){return window.innerWidth-this.divLeft-10}},mounted:function(){var e=this,t=f.a.connect(this.$host);t.on("list",function(t){-1!==t.name.lastIndexOf("\\")&&(t.name=t.name.substring(t.name.lastIndexOf("\\")+1,t.name.length)),e.list=t}),t.on("change",function(t){e.addUnseenFile(t);var n=e.openFiles.find(function(e){return e.path===t});n&&e.getFile(t)})},methods:{getFile:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var n,r,i,a,o,u,c,l,p=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/files"+t);case 2:n=e.sent,r=t.split("/").pop(),i={name:r,path:t,code:"",unseenLines:[],marker:b,editorOption:{tabSize:4,theme:"material",lineNumbers:!0,lineWrapping:!1,line:!0,readOnly:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers","breakpoints","CodeMirror-foldgutter"]}},a=t.split(".").pop(),i.editorOption.mode=this.getEditorOption(a),o=this.openFiles.find(function(e){return e.path===t}),o?(u="","string"===typeof n.data?u=n.data:"object"===Object(s["a"])(n.data)&&(u=JSON.stringify(n.data)),c=v.diffLines(o.code,u),o.unseenLines=this.addUnseenLine(c),o.code=u):(i.code="","string"===typeof n.data?i.code=n.data:"object"===Object(s["a"])(n.data)&&(i.code=JSON.stringify(n.data)),l=this.openFiles.findIndex(function(e){return e.path===p.currentOpenFilePath}),this.openFiles.splice(l+1,0,i),this.currentOpenFilePath=t);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getEditorOption:function(e){switch(e){case"vue":return"script/x-vue";case"html":return"text/html";case"md":return"text/x-markdown";case"jsx":return"text/jsx";case"css":return"text/css";default:return"text/javascript"}},openFile:function(e){this.removeUnseenFile(e),this.openFiles.find(function(t){return t.path===e})?this.currentOpenFilePath=e:this.getFile(e)},closeFile:function(e){var t=this.openFiles.findIndex(function(t){return t.path===e});if(this.openFiles.splice(t,1),this.currentOpenFilePath===e){var n=t<=0?t:t-1;0===this.openFiles.length?this.currentOpenFilePath="":this.currentOpenFilePath=this.openFiles[n].path}},addUnseenFile:function(e){var t=this;if(!this.unseenFilePaths.find(function(t){return t===e})){this.unseenFilePaths.push(e);var n=e.split("/");n.shift(),n.shift(),n.forEach(function(n){var r=e.substring(0,e.search("/"+n));t.unseenFolderPaths.push({path:r+"/",file:e})})}},removeUnseenFile:function(e){var t=this,n=this.unseenFilePaths.indexOf(e);if(-1!==n){this.unseenFilePaths.splice(n,1);var r=this.unseenFolderPaths.filter(function(t){return t.file===e});r.forEach(function(){var n=t.unseenFolderPaths.findIndex(function(t){return t.file===e});-1!==n&&t.unseenFolderPaths.splice(n,1)})}},addUnseenLine:function(e){var t=0,n=[];return e.forEach(function(e){if(void 0===e.added&&void 0===e.removed&&(t+=e.count),e.added)if(e.count>1)for(var r=0;r<e.count;r++)n.push(parseInt(t)),t++;else n.push(parseInt(t)),t+=e.count}),n},isUnseenTab:function(e){return this.unseenFilePaths.find(function(t){return t===e})},downloadZip:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getZip(this.list);case 2:return e.next=4,g.generateAsync({type:"blob"});case 4:t=e.sent,p.a.saveAs(t,this.list.name+".zip");case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getZip:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var n,r,i,a,s,o,u,c,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=!0,r=!1,i=void 0,e.prev=3,a=t.children[Symbol.iterator]();case 5:if(n=(s=a.next()).done){e.next=28;break}if(o=s.value,u=o.path.split(".").pop().toUpperCase(),"directory"!==o.type){e.next=13;break}return e.next=11,this.getZip(o);case 11:e.next=25;break;case 13:if("file"!==o.type||"PNG"!==u&&"JPG"!==u&&"JPEG"!==u&&"ICO"!==u&&"SVG"!==u&&"GIF"!==u){e.next=20;break}return e.next=16,this.promiseImage(o);case 16:c=e.sent,g.file(this.list.name+o.path,c,{base64:!0}),e.next=25;break;case 20:if("file"!==o.type||"MAP"===u){e.next=25;break}return e.next=23,this.$http.get("/files"+o.path);case 23:l=e.sent,g.file(this.list.name+o.path,l.data,{binary:!0});case 25:n=!0,e.next=5;break;case 28:e.next=34;break;case 30:e.prev=30,e.t0=e["catch"](3),r=!0,i=e.t0;case 34:e.prev=34,e.prev=35,n||null==a.return||a.return();case 37:if(e.prev=37,!r){e.next=40;break}throw i;case 40:return e.finish(37);case 41:return e.finish(34);case 42:case"end":return e.stop()}},e,this,[[3,30,34,42],[35,,37,41]])}));return function(t){return e.apply(this,arguments)}}(),promiseImage:function(e){return new Promise(function(t,n){var r=document.createElement("img");r.src="files"+e.path,r.onload=function(){var e=document.createElement("canvas");e.width=this.naturalWidth,e.height=this.naturalHeight,e.getContext("2d").drawImage(this,0,0),t(e.toDataURL("image/png").replace(/^data:image\/(png|jpg);base64,/,""))}})},mouseDown:function(e){this.mousePress=!0},mousemove:function(e){this.mousePress&&(this.divLeft=e.screenX)},mouseUp:function(e){this.mousePress=!1}},components:{Item:m,Viewer:d}},y=F,x=(n("nNx0"),n("KHd+")),P=Object(x["a"])(y,i,a,!1,null,null,null),O=P.exports,k=n("vDqi"),C=n.n(k);n("p77/");r["a"].prototype.$isProduction=!0,w=window.location.href.replace("http://","").replace("https://","").replace("/","");var j="//".concat(w,"/");r["a"].prototype.$baseApiUrl=j,r["a"].prototype.$host=w,r["a"].prototype.$http=C.a.create({baseURL:j}),new r["a"]({el:"#app",render:function(e){return e(O)}})},nNx0:function(e,t,n){"use strict";var r=n("uWEC"),i=n.n(r);i.a},uWEC:function(e,t,n){}});
//# sourceMappingURL=app.226be84b.js.map